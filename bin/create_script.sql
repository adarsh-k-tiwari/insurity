create or replace TABLE TELEMATICS_DB.RAW_DATA.AUSTIN_INCIDENTS (
	INCIDENT_ID VARCHAR(16777216),
	ISSUE_REPORTED VARCHAR(16777216),
	PUBLISHED_DATE VARCHAR(16777216),
	LOCATION_DESCRIPTION VARCHAR(16777216),
	LATITUDE FLOAT,
	LONGITUDE FLOAT,
	STATUS VARCHAR(16777216),
	AGENCY VARCHAR(16777216),
	FETCHED_AT TIMESTAMP_NTZ(9)
);

create or replace TABLE TELEMATICS_DB.RAW_DATA.DRIVER_PROFILES (
	DRIVER_ID VARCHAR(16777216) NOT NULL,
	DRIVER_TYPE VARCHAR(16777216),
	AGE NUMBER(38,0),
	VEHICLE_MAKE VARCHAR(16777216),
	VEHICLE_YEAR NUMBER(38,0),
	ANNUAL_MILEAGE_ESTIMATE NUMBER(38,0),
	HOME_LOCATION VARCHAR(16777216),
	WORK_LOCATION VARCHAR(16777216),
	BASE_SPEED_MULTIPLIER FLOAT,
	HARD_BRAKING_PROB FLOAT,
	HARD_ACCEL_PROB FLOAT,
	NIGHT_DRIVING_PROB FLOAT,
	WEEKEND_DRIVING_MULT FLOAT,
	CREATED_AT TIMESTAMP_NTZ(9),
	primary key (DRIVER_ID)
);


create or replace TABLE TELEMATICS_DB.RAW_DATA.PRICING_DATA (
	DRIVER_ID VARCHAR(16777216) NOT NULL,
	POLICY_PERIOD VARCHAR(16777216) NOT NULL,
	BASE_PREMIUM FLOAT,
	RISK_ADJUSTMENT FLOAT,
	FINAL_PREMIUM FLOAT,
	DISCOUNT_APPLIED FLOAT,
	CREATED_AT TIMESTAMP_NTZ(9) DEFAULT CURRENT_TIMESTAMP(),
	primary key (DRIVER_ID, POLICY_PERIOD)
);



create or replace TABLE TELEMATICS_DB.RAW_DATA.RISK_SCORES (
	DRIVER_ID VARCHAR(16777216) NOT NULL,
	AVG_RISK FLOAT,
	MAX_RISK FLOAT,
	STD_RISK FLOAT,
	SPEED_SCORE_MEAN FLOAT,
	BRAKING_SCORE_MEAN FLOAT,
	ACCELERATION_SCORE_MEAN FLOAT,
	PHONE_USAGE_SCORE_MEAN FLOAT,
	TIME_SCORE_MEAN FLOAT,
	DISTANCE_SCORE_MEAN FLOAT,
	INCIDENT_EXPOSURE_SCORE_MEAN FLOAT,
	DRIVER_TYPE VARCHAR(16777216),
	AGE NUMBER(38,0),
	VEHICLE_MAKE VARCHAR(16777216),
	COMPOSITE_RISK_SCORE FLOAT,
	RISK_CATEGORY VARCHAR(16777216),
	PREMIUM_MULTIPLIER FLOAT,
	primary key (DRIVER_ID)
);


create or replace TABLE TELEMATICS_DB.RAW_DATA.TELEMATICS_DATA (
	TRIP_ID VARCHAR(16777216),
	DRIVER_ID VARCHAR(16777216),
	TIMESTAMP VARCHAR(16777216),
	LATITUDE FLOAT,
	LONGITUDE FLOAT,
	SPEED_KMH FLOAT,
	ACCELERATION_MS2 FLOAT,
	HARD_BRAKING BOOLEAN,
	HARD_ACCELERATION BOOLEAN,
	PHONE_USAGE BOOLEAN,
	TIME_OF_DAY NUMBER(38,0),
	DAY_OF_WEEK NUMBER(38,0),
	IS_WEEKEND BOOLEAN,
	TRIP_TYPE VARCHAR(16777216),
	WEATHER_CONDITION VARCHAR(16777216),
	DISTANCE_FROM_HOME FLOAT,
	TRIP_DISTANCE_KM FLOAT,
	INCIDENT_RISK_FACTOR FLOAT,
	START_LOCATION VARCHAR(16777216),
	END_LOCATION VARCHAR(16777216),
	CREATED_AT VARCHAR(16777216),
	DATA_QUALITY_SCORE FLOAT,
	PROCESSING_BATCH VARCHAR(16777216) DEFAULT 'SYNTHETIC_BATCH_1'
);